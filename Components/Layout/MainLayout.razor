@inherits LayoutComponentBase

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>
    <main>
        <div class="top-row px-4">
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.devbridge-autocomplete/1.4.11/jquery.autocomplete.min.js"></script>
                <style>
                    body {
                        background-color: #181818;
                     
                    }

                      

                    .search-wrapper {
                        position: relative;
                        width: 100%;
                        max-width: 600px;
                    }

                    .search-bar {
                        width: 100%;
                        height: 40px;
                        font-size: 16px;
                        background: #252525;
                        color: white;
                        padding: 5px 15px 5px 40px;
                        border-radius: 10px;
                        outline: none;
                        border: 2px solid transparent;
                        transition: all 0.3s ease-in-out;
                    }

                        .search-bar:focus {
                            width: 110%;
                            max-width: 650px;
                            border: 2px solid #007bff;
                            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
                        }

                    .search-icon {
                        position: absolute;
                        top: 50%;
                        left: 12px;
                        transform: translateY(-50%);
                        color: #007bff;
                        font-size: 18px;
                        transition: all 0.3s ease-in-out;
                    }

                    .search-bar:focus + .search-icon {
                        color: white;
                        transform: translateY(-50%) scale(1.1);
                    }

                    .autocomplete-suggestion {
                        display: flex;
                        align-items: center;
                        padding: 10px;
                        cursor: pointer;
                        border-bottom: 1px solid #444;
                        background: #181818;
                        font-size: 14px;
                        color: white;
                        border-radius: 5px;
                    }

                        .autocomplete-suggestion img {
                            width: 50px;
                            height: 75px;
                            object-fit: cover;
                            margin-right: 10px;
                            border-radius: 5px;
                        }

                    .autocomplete-info {
                        display: flex;
                        flex-direction: column;
                    }

                        .autocomplete-info span {
                            font-weight: bold;
                            font-size: 16px;
                        }

                    .watch-btn {
                        background-color: #007bff;
                        color: white;
                        padding: 6px 12px;
                        font-size: 13px;
                        border-radius: 4px;
                        text-decoration: none;
                        margin-top: 5px;
                        width: 100px;
                    }

                        .watch-btn:hover {
                            background-color: #0056b3;
                        }
                </style>

                <!-- Search bar inside Navbar -->
                <div class="search-wrapper d-flex">
                    <input type="text" id="movie-search" class="search-bar" placeholder="Search movies...">
                    <span class="search-icon"></span>
                </div>
                <script>
                    $(document).ready(function () {
                        $('#movie-search').autocomplete({
                            serviceUrl: 'https://api.themoviedb.org/3/search/movie',
                            dataType: 'json',
                            params: {
                                api_key: '5f4f3893af8e7aba1ef26b10a0178388'
                            },
                            paramName: 'query',
                            transformResult: function(response) {
                                return {
                                    suggestions: response.results.map(movie => ({
                                        value: movie.title,
                                        data: movie
                                    }))
                                };
                            },
                            onSelect: function (suggestion) {
                                window.location.href = `/Watch/${suggestion.data.id}`;
                            },
                            formatResult: function (suggestion, currentValue) {
                                return `
                                      <div class="autocomplete-suggestion">
                        <img src="https://image.tmdb.org/t/p/w92${suggestion.data.poster_path || ''}" alt="${suggestion.data.title}">
                        <div class="autocomplete-info">
                            <span>${suggestion.data.title}</span>
                            <p class="description">${suggestion.data.overview || 'No description available.'}</p>
                                             <a href="javascript:void(0);" class="watch-btn"
                       onclick="window.location.href='/Watch/${suggestion.data.id}';">
                       Watch Now
                    </a>
                        </div>
                    </div>
                                `;
                            }
                        });
                    });
                </script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
                <br />
                <br />
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>


